<div class="contact u-container u-mb-xl">
  <h2 class="contact__heading u-mb-m">Contact</h2>
  <div
    class="contact__container"
    *ngIf="(sendMessageSuccess$ | async) == false; else showStatus"
  >
    <h4 class="contact__subheading u-mb-xs">Send me a message</h4>
    <p class="contact__message u-mb-xl">
      Feel free to get in touch with me anything related to work or <br />
      you can just say hi. I will get back to you as soon as I can.
    </p>
  </div>
  <form
    class="contact__form"
    [formGroup]="contactForm"
    (ngSubmit)="sendMessageHandler()"
    *ngIf="(sendMessageSuccess$ | async) == false"
  >
    <div
      class="contact__form-group"
      [ngClass]="
        name.invalid && name.touched ? 'contact__form-group-invalid' : ''
      "
      [ngClass]="name.valid && name.touched ? 'contact__form-group-valid' : ''"
    >
      <input
        type="text"
        name="name"
        id="name"
        class="contact__input-field"
        placeholder="Name"
        formControlName="name"
      />
    </div>
    <small class="contact__form-invalid" *ngIf="name.invalid && name.touched"
      >Your name does not look right</small
    >
    <div
      class="contact__form-group"
      [ngClass]="
        email.invalid && email.touched ? 'contact__form-group-invalid' : ''
      "
      [ngClass]="
        email.valid && email.touched ? 'contact__form-group-valid' : ''
      "
    >
      <input
        type="email"
        name="email"
        id="email"
        class="contact__input-field"
        placeholder="Email address"
        formControlName="email"
      />
    </div>
    <small class="contact__form-invalid" *ngIf="email.invalid && email.touched"
      >Your email does not look right</small
    >
    <div
      class="contact__form-group"
      [ngClass]="
        message.invalid && message.touched ? 'contact__form-group-invalid' : ''
      "
      [ngClass]="
        message.valid && message.touched ? 'contact__form-group-valid' : ''
      "
    >
      <textarea
        name="message"
        id="message"
        cols="30"
        rows="7"
        placeholder="Message"
        class="contact__text-area"
        formControlName="message"
      ></textarea>
    </div>
    <small
      class="contact__form-invalid"
      *ngIf="message.invalid && message.touched"
      >Your message is too short.</small
    >
    <div class="contact__form-group">
      <button
        class="contact__btn btn btn--rounded contact__btn--hoverable"
        [disabled]="contactForm.invalid || (sendMessageSuccess$ | async)"
        type="submit"
        [ngClass]="(sendMessageSending$ | async) ? 'contact__btn--loading' : ''"
      >
        Send
        <img
          src="assets/icon__paper-plane.svg"
          alt="papel-plane icon"
          class="contact__btn-plane"
        />
      </button>
    </div>
  </form>
  <ng-template #showStatus>
    <div class="contact__container">
      <h4 class="contact__subheading u-mb-xs">
        {{ (sendMessagePropsMessage$ | async).split(".")[0] }}
      </h4>
      <p class="contact__message u-mb-l">
        {{ (sendMessagePropsMessage$ | async).split(".")[1] }}
      </p>
    </div>
  </ng-template>
</div>
